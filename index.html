<!DOCTYPE html>
<html lang="fil">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cristo Rey Bakery | Sariwang Tinapay, Gawa sa Puso</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- EmailJS CDN -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <!-- Custom Tailwind Configuration for Bakery Colors and Font -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bakery-primary': '#8B5A2B', // Dark Brown/Coffee
                        'bakery-accent': '#FDD835', // Gold/Yellow Accent
                        'bakery-cream': '#FFF8DC',  // Creamy Background
                        'bakery-text': '#333333',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        cursive: ['Georgia', 'serif'], 
                    },
                }
            }
        }
    </script>
    <style>
        /* Styling for the hero image section to cover the area */
        .hero-bg {
            background-image: url('https://placehold.co/1200x600/8B5A2B/FFF8DC?text=Maligayang+Pagdating+sa+Cristo+Rey+Bakery');
            background-size: cover;
            background-position: center;
        }
        .btn-primary {
            transition: all 0.3s ease;
        }
        .btn-primary:hover, .btn-primary:active { 
            box-shadow: 0 10px 15px -3px rgba(139, 90, 43, 0.5), 0 4px 6px -2px rgba(139, 90, 43, 0.1);
            transform: translateY(-2px);
        }
        /* Style for the modal overlay */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.6);
        }
        /* Custom spinner for loading states */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-bakery-cream text-bakery-text font-sans antialiased">

    <!-- HEADER/NAVIGATION -->
    <header class="sticky top-0 z-50 bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4 md:justify-start md:space-x-10">
                
                <!-- Logo/Brand Name -->
                <div class="flex justify-start lg:w-0 lg:flex-1">
                    <a href="#tahanan" class="text-3xl font-cursive font-bold text-bakery-primary hover:text-bakery-accent transition duration-300">
                        Cristo Rey Bakery
                    </a>
                </div>

                <!-- Desktop Navigation Links -->
                <nav class="hidden md:flex space-x-10">
                    <a href="#tahanan" class="text-lg font-medium text-bakery-text hover:text-bakery-primary transition duration-300">Home</a>
                    <a href="#menu" class="text-lg font-medium text-bakery-text hover:text-bakery-primary transition duration-300">Menu</a>
                    <a href="#tungkol" class="text-lg font-medium text-bakery-text hover:text-bakery-primary transition duration-300">Tungkol sa Amin</a>
                    <a href="#makipag-ugnayan" class="text-lg font-medium text-bakery-text hover:text-bakery-primary transition duration-300">Makipag-ugnayan</a>
                </nav>

                <!-- Call to Action Button (Desktop) -->
                <div class="hidden md:flex items-center justify-end md:flex-1 lg:w-0">
                    <a href="#makipag-ugnayan" class="ml-8 whitespace-nowrap inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-full shadow-lg text-base font-medium text-white bg-bakery-primary btn-primary">
                        Umorder Na
                    </a>
                </div>

                <!-- Mobile Menu Button (Increased touch target size with p-3) -->
                <div class="-mr-2 -my-2 md:hidden">
                    <button id="mobile-menu-button" type="button" class="bg-bakery-cream rounded-md p-3 inline-flex items-center justify-center text-bakery-primary hover:text-bakery-accent focus:outline-none focus:ring-2 focus:ring-inset focus:ring-bakery-primary">
                        <!-- Icon (Hamburger) -->
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>

            </div>
        </div>

        <!-- MOBILE MENU PANEL (Slide-in Drawer) -->
        <div id="mobile-menu" class="fixed inset-0 z-50 transition-all duration-300 ease-in-out transform translate-x-full hidden md:hidden" aria-hidden="true">
            <div class="absolute inset-0 bg-black bg-opacity-50" id="mobile-menu-overlay"></div>
            
            <div class="fixed top-0 right-0 w-64 max-w-full h-full bg-white shadow-2xl overflow-y-auto">
                <div class="pt-5 pb-6 px-5">
                    <div class="flex items-center justify-between">
                        <div class="text-2xl font-cursive font-bold text-bakery-primary">
                            Cristo Rey Bakery
                        </div>
                        <div class="-mr-2">
                            <button id="mobile-menu-close-button" type="button" class="bg-white rounded-md p-3 inline-flex items-center justify-center text-bakery-primary hover:text-bakery-accent focus:outline-none focus:ring-2 focus:ring-inset focus:ring-bakery-primary">
                                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="mt-6">
                        <nav class="grid gap-y-1" id="mobile-nav-links">
                            <a href="#tahanan" class="mobile-nav-link block text-base font-medium text-bakery-text hover:bg-bakery-cream hover:text-bakery-primary transition duration-300 py-3 px-2 rounded-lg">Home</a>
                            <a href="#menu" class="mobile-nav-link block text-base font-medium text-bakery-text hover:bg-bakery-cream hover:text-bakery-primary transition duration-300 py-3 px-2 rounded-lg">Menu</a>
                            <a href="#tungkol" class="mobile-nav-link block text-base font-medium text-bakery-text hover:bg-bakery-cream hover:text-bakery-primary transition duration-300 py-3 px-2 rounded-lg">Tungkol sa Amin</a>
                            <a href="#makipag-ugnayan" class="mobile-nav-link block text-base font-medium text-bakery-text hover:bg-bakery-cream hover:text-bakery-primary transition duration-300 py-3 px-2 rounded-lg">Makipag-ugnayan</a>
                        </nav>
                    </div>
                    <!-- Call to Action Button (Mobile) - FIXED: Changed to <a> tag -->
                    <div class="mt-6">
                        <a href="#makipag-ugnayan" class="w-full flex items-center justify-center px-4 py-3 border border-transparent rounded-full shadow-md text-base font-medium text-white bg-bakery-primary btn-primary mobile-nav-link">
                            Umorder Na
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        
        <!-- SECTION 1: HERO/WELCOME -->
        <section id="tahanan" class="hero-bg py-24 md:py-32 lg:py-48 flex items-center text-center">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="bg-black bg-opacity-40 p-6 rounded-xl shadow-2xl backdrop-blur-sm">
                    <h1 class="text-4xl sm:text-5xl lg:text-7xl font-extrabold text-white mb-4">
                        <span class="text-bakery-accent">Sariwang Tinapay</span>, Gawa sa Puso.
                    </h1>
                    <p class="mt-3 max-w-md mx-auto text-lg sm:text-xl text-bakery-cream">
                        Ang lasa ng pagmamahal sa bawat kagat. Bisitahin ang Cristo Rey Bakery, ang inyong paboritong lokal na panaderya.
                    </p>
                    <div class="mt-10">
                        <a href="#menu" class="inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-full text-bakery-primary bg-bakery-accent btn-primary shadow-xl">
                            Tingnan ang Menu
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: MENU/PRODUCTS SHOWCASE -->
        <section id="menu" class="py-16 sm:py-24 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-4xl font-extrabold text-bakery-primary mb-2">Aming Pinakamabenta at Iba Pa</h2>
                    <p class="text-lg text-bakery-text mb-12">Handa na kaming ihain ang mga pinakamasarap na tinapay sa inyo.</p>
                </div>
                
                <!-- Subtitle for Bread Section -->
                <h3 class="text-3xl font-bold text-bakery-primary mb-6 border-b-2 border-bakery-accent pb-2">Mga Tinapay (Freshly Baked)</h3>

                <!-- Bread Product Grid (Responsive grid: 1 column on mobile, 3 columns on desktop) -->
                <!-- Adjusted grid to 3 columns max to look cleaner with fewer items -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <!-- Product Card 1: Pan de Sal -->
                    <div class="bg-bakery-cream rounded-xl shadow-lg overflow-hidden border border-bakery-primary/20 hover:shadow-2xl transition duration-500 transform hover:scale-[1.02] cursor-pointer">
                        <img class="w-full h-48 object-cover object-center" 
                            src="https://placehold.co/600x400/D2B48C/8B5A2B?text=Pan+de+Sal" 
                            alt="Masarap na Pan de Sal"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/8B5A2B/FFF8DC?text=Wala+Pang+Larawan';"
                        >
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-bakery-primary">Pan de Sal</h3>
                            <!-- PRESYO NA-UPDATE SA ₱1/piraso -->
                            <p class="mt-2 text-sm text-bakery-text">Ang pambansang tinapay! Malambot, bagong luto, at may tamang alat-tamis. Perfect sa umaga.</p>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-xl font-extrabold text-bakery-accent">₱1/piraso</span>
                                <button data-item="Pan de Sal" class="pairing-suggestion-trigger px-4 py-2 border border-transparent text-sm font-medium rounded-full text-white bg-bakery-primary hover:bg-bakery-accent transition duration-300 whitespace-nowrap">
                                    ✨ Pairing
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Product Card 2: Ensaymada -->
                    <div class="bg-bakery-cream rounded-xl shadow-lg overflow-hidden border border-bakery-primary/20 hover:shadow-2xl transition duration-500 transform hover:scale-[1.02] cursor-pointer">
                        <img class="w-full h-48 object-cover object-center" 
                            src="https://placehold.co/600x400/F0E68C/8B5A2B?text=Ensaymada" 
                            alt="Malambot na Ensaymada"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/8B5A2B/FFF8DC?text=Wala+Pang+Larawan';"
                        >
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-bakery-primary">Ensaymada</h3>
                            <p class="mt-2 text-sm text-bakery-text">Malambot, may mantikilya at asukal, at tinadtaran ng keso. Para sa inyong meryenda.</p>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-xl font-extrabold text-bakery-accent">₱30/piraso</span>
                                <button data-item="Ensaymada" class="pairing-suggestion-trigger px-4 py-2 border border-transparent text-sm font-medium rounded-full text-white bg-bakery-primary hover:bg-bakery-accent transition duration-300 whitespace-nowrap">
                                    ✨ Pairing
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Product Card 3: Spanish Bread -->
                    <div class="bg-bakery-cream rounded-xl shadow-lg overflow-hidden border border-bakery-primary/20 hover:shadow-2xl transition duration-500 transform hover:scale-[1.02] cursor-pointer">
                        <img class="w-full h-48 object-cover object-center" 
                            src="https://placehold.co/600x400/CD853F/FFF8DC?text=Spanish+Bread" 
                            alt="Matamis na Spanish Bread"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/8B5A2B/FFF8DC?text=Wala+Pang+Larawan';"
                        >
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-bakery-primary">Spanish Bread</h3>
                            <p class="mt-2 text-sm text-bakery-text">Pinasarap na tinapay na may palaman na matamis, pinagsamang butter at asukal.</p>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-xl font-extrabold text-bakery-accent">₱10/piraso</span>
                                <button data-item="Spanish Bread" class="pairing-suggestion-trigger px-4 py-2 border border-transparent text-sm font-medium rounded-full text-white bg-bakery-primary hover:bg-bakery-accent transition duration-300 whitespace-nowrap">
                                    ✨ Pairing
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product Card 4: Monay (Bagong Dagdag) -->
                    <div class="bg-bakery-cream rounded-xl shadow-lg overflow-hidden border border-bakery-primary/20 hover:shadow-2xl transition duration-500 transform hover:scale-[1.02] cursor-pointer">
                        <img class="w-full h-48 object-cover object-center" 
                            src="https://placehold.co/600x400/FFDAB9/8B5A2B?text=Monay" 
                            alt="Malambot na Monay"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/8B5A2B/FFF8DC?text=Wala+Pang+Larawan';"
                        >
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-bakery-primary">Monay</h3>
                            <p class="mt-2 text-sm text-bakery-text">Makunat ngunit malambot sa loob. Tradisyonal na Monay, perpekto sa mainit na kape.</p>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-xl font-extrabold text-bakery-accent">₱15/piraso</span>
                                <button data-item="Monay" class="pairing-suggestion-trigger px-4 py-2 border border-transparent text-sm font-medium rounded-full text-white bg-bakery-primary hover:bg-bakery-accent transition duration-300 whitespace-nowrap">
                                    ✨ Pairing
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Product Card 5: Kababayan (Bagong Dagdag) -->
                    <div class="bg-bakery-cream rounded-xl shadow-lg overflow-hidden border border-bakery-primary/20 hover:shadow-2xl transition duration-500 transform hover:scale-[1.02] cursor-pointer">
                        <img class="w-full h-48 object-cover object-center" 
                            src="https://placehold.co/600x400/FFC0CB/8B5A2B?text=Kababayan" 
                            alt="Muffin-like Kababayan"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/8B5A2B/FFF8DC?text=Wala+Pang+Larawan';"
                        >
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-bakery-primary">Kababayan</h3>
                            <p class="mt-2 text-sm text-bakery-text">Sweet muffin-like tinapay, may pambihirang hugis. Tamang-tama sa mga bata.</p>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-xl font-extrabold text-bakery-accent">₱8/piraso</span>
                                <button data-item="Kababayan" class="pairing-suggestion-trigger px-4 py-2 border border-transparent text-sm font-medium rounded-full text-white bg-bakery-primary hover:bg-bakery-accent transition duration-300 whitespace-nowrap">
                                    ✨ Pairing
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Add a placeholder card for even spacing -->
                    <div class="hidden lg:block bg-transparent"></div>

                </div>
                
            </div>
        </section>

        <!-- SECTION 3: ABOUT US -->
        <section id="tungkol" class="py-16 sm:py-24 bg-bakery-cream">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    
                    <!-- Text Content -->
                    <div>
                        <h2 class="text-4xl font-extrabold text-bakery-primary mb-4">Ang Aming Kasaysayan</h2>
                        <p class="text-lg text-bakery-text mb-6">
                            Ang **Cristo Rey Bakery** ay nagsimula noong 1985 sa maliit na kusina ni **Tito Nike**. Ang kanyang simpleng pangarap ay makagawa ng pinakamasarap na Pan de Sal sa komunidad, gamit ang tradisyonal na resipe na ipinasa sa henerasyon.
                        </p>
                        <p class="text-lg text-bakery-text mb-6">
                            Mula sa iisang produkto, lumaki ang bakery, ngunit hindi nagbago ang aming pangako: gamitin ang pinakamataas na kalidad ng sangkap at maghurno nang may pagmamahal. Ngayon, kami ay isang pamilya na patuloy na naghahatid ng sariwa at de-kalidad na tinapay araw-araw.
                        </p>
                        <a href="#makipag-ugnayan" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-white bg-bakery-accent hover:bg-bakery-primary transition duration-300 btn-primary shadow-lg">
                            Bisitahin Kami
                        </a>
                    </div>
                    
                    <!-- Image Placeholder -->
                    <div class="hidden lg:block">
                        <img class="w-full h-auto rounded-xl shadow-2xl" src="https://placehold.co/600x400/8B5A2B/FFF8DC?text=Tito+Nike+%26+Tradition" alt="Tito Nike at ang tradisyon ng pagbe-bake">
                    </div>

                </div>
            </div>
        </section>

        <!-- SECTION 4: CONTACT / MAKI PAG-UGNAYAN -->
        <section id="makipag-ugnayan" class="py-16 sm:py-24 bg-gray-100">
            <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-4xl font-extrabold text-bakery-primary mb-2">Makipag-ugnayan</h2>
                    <p class="text-lg text-bakery-text mb-8">Magpadala sa amin ng mensahe para sa mga katanungan o bulk orders.</p>
                </div>

                <form id="contact-form" class="bg-white p-8 rounded-xl shadow-2xl space-y-6">
                    <div>
                        <label for="name" class="block text-sm font-medium text-bakery-text mb-1">Pangalan</label>
                        <input type="text" id="name" name="name" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-bakery-accent focus:border-bakery-accent transition duration-150" placeholder="Juan Dela Cruz">
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-bakery-text mb-1">Email</label>
                        <input type="email" id="email" name="email" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-bakery-accent focus:border-bakery-accent transition duration-150" placeholder="juan@example.com">
                    </div>
                    
                    <!-- Simula ng Bagong Location Field -->
                    <div>
                        <label for="location" class="block text-sm font-medium text-bakery-text mb-1">Lokasyon (Barangay/Lugar)</label>
                        <input type="text" id="location" name="location" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-bakery-accent focus:border-bakery-accent transition duration-150" placeholder="Brgy. Cristo Rey, Capas">
                    </div>
                    <!-- Katapusan ng Bagong Location Field -->

                    <div>
                        <label for="message" class="block text-sm font-medium text-bakery-text mb-1">Mensahe</label>
                        <textarea id="message" name="message" rows="4" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-bakery-accent focus:border-bakery-accent transition duration-150" placeholder="Gusto ko pong umorder ng 50 piraso ng ensaymada..."></textarea>
                    </div>
                    
                    <!-- Form Message Display Area -->
                    <div id="form-message" class="py-2 text-center rounded-lg" style="display: none;"></div>

                    <div>
                        <button id="submit-button" type="submit" class="w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-white bg-bakery-primary hover:bg-bakery-accent btn-primary transition duration-300 shadow-md" disabled>
                            <span id="button-text">Ipadala ang Mensahe</span>
                            <div id="loading-spinner" class="spinner ml-3 hidden"></div>
                        </button>
                    </div>
                </form>
            </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="bg-bakery-primary py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-bakery-cream">
            <!-- Inalis ang "Lahat ng karapatan ay nakalaan." -->
            <p>&copy; 2025 Cristo Rey Bakery</p> 
            <p class="mt-2 text-sm">Oras ng Bukas: Lunes - Sabado, 6:00 AM - 6:00 PM</p>
            <p class="text-sm">Matatagpuan: Blk 500, Cristo Rey, Capas, Tarlac</p>
        </div>
    </footer>


    <!-- MODAL FOR PAIRING SUGGESTION (Hidden by default) -->
    <div id="pairing-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4">
        <div class="modal-overlay absolute inset-0"></div>
        <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-md z-10 transform transition-all duration-300">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-2xl font-bold text-bakery-primary">Loading Suggestion...</h3>
                <button id="modal-close-button" class="text-bakery-primary hover:text-bakery-accent p-2 rounded-full transition duration-300">
                    <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="modal-content" class="text-bakery-text">
                <div id="modal-loading" class="flex items-center justify-center py-8">
                    <div class="spinner mr-3 !border-l-bakery-primary"></div>
                    <p class="text-bakery-primary">Naghahanap ng perpektong pares...</p>
                </div>
                <p id="modal-suggestion" class="hidden"></p>
                <p id="modal-error" class="text-red-600 hidden">May problema sa pagkuha ng suhestiyon. Pakisubok ulit.</p>
            </div>
        </div>
    </div>


    <script>
        // --- EMAILJS CONFIGURATION (Paki-verify ang mga keys na ito!) ---
        const SERVICE_ID = 'service_8biqga5'; 
        const TEMPLATE_ID = 'template_v7q6bm5'; 
        const PUBLIC_KEY = 'qi76T89Rb0ZWM_At7'; 
        const BUSINESS_EMAIL = "kimmedrano25@gmail.com"; 

        emailjs.init(PUBLIC_KEY);

        // --- GLOBAL UI ELEMENTS ---
        let formMessage, submitButton, buttonText, loadingSpinner, contactForm;
        
        // Function to show/hide mobile menu
        function toggleMobileMenu(show) {
            const menu = document.getElementById('mobile-menu');
            const body = document.body;
            
            if (show) {
                menu.classList.remove('hidden');
                menu.classList.remove('translate-x-full');
                body.style.overflow = 'hidden'; // Prevents background scrolling
            } else {
                menu.classList.add('translate-x-full');
                // Use a timeout to hide the menu element after the transition ends
                setTimeout(() => {
                    menu.classList.add('hidden');
                    body.style.overflow = '';
                }, 300);
            }
        }
        
        // Function to update the contact form button state
        function setFormState(isLoading, message, isError) {
            submitButton.disabled = isLoading;
            buttonText.textContent = isLoading ? 'Ipinapadala...' : 'Ipadala ang Mensahe';
            loadingSpinner.classList.toggle('hidden', !isLoading);
            
            if (message) {
                formMessage.textContent = message;
                formMessage.style.display = 'block';
                formMessage.classList.remove('bg-green-100', 'text-green-800', 'bg-red-100', 'text-red-800');
                
                if (!isLoading) {
                    if (isError) {
                        formMessage.classList.add('bg-red-100', 'text-red-800');
                    } else {
                        formMessage.classList.add('bg-green-100', 'text-green-800');
                    }
                }
            } else {
                formMessage.style.display = 'none';
            }
        }

        // --- CONTACT FORM SUBMISSION HANDLER ---
        async function handleContactSubmit(event) {
            event.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const location = document.getElementById('location').value.trim(); // Kinuha ang bagong Location field
            const message = document.getElementById('message').value.trim();

            if (!name || !email || !location || !message) { // Idinagdag ang 'location' sa validation
                setFormState(false, '⚠️ Pakikumpleto ang lahat ng field.', true);
                return;
            }

            setFormState(true, 'Ipinapadala ang inyong mensahe...', false);
            
            try {
                // Template parameters must exactly match the variables in EmailJS template
                const templateParams = {
                    name: name,
                    email: email,
                    location: location, // Idinagdag ang Location sa parameters
                    message: message,
                    to_email: BUSINESS_EMAIL 
                };

                await emailjs.send(SERVICE_ID, TEMPLATE_ID, templateParams);
                
                setFormState(false, '✅ Matagumpay na naipadala! Sasagutin namin kayo sa lalong madaling panahon.', false);
                contactForm.reset();
                // Optionally hide success message after a few seconds
                setTimeout(() => setFormState(false, '', false), 7000);

            } catch (error) {
                console.error("EmailJS Error:", error);
                setFormState(false, `❌ Nabigo ang pagpapadala. Error: ${error.text || error}`, true);
                // Ensure form message remains visible on error
                setTimeout(() => {
                    if (formMessage.style.display !== 'none') {
                        setFormState(false, '❌ Nabigo ang pagpapadala. Pakisubok ulit.', true);
                    }
                }, 7000);
            }
        }

        // --- GEMINI AI PAIRING SUGGESTION LOGIC ---
        async function getPairingSuggestion(itemName, modalTitleElement, modalSuggestionElement, modalLoadingElement, modalErrorElement) {
            // 1. Setup API Details
            // I-UPDATE: Inilagay na ang API key na binigay ng user
            const apiKey = "AIzaSyB4qBgWTVeNB-za3zmC0zDS3lGWKcEFZWA"; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            // 2. Define Prompts
            const systemPrompt = "Bilang isang masigla at madamdaming panadero sa Pilipinas, magbigay ng iisang (single) creative at masarap na suhestiyon kung paano ipares (pairing) ang tinapay na binigay. Ang sagot ay dapat nasa Filipino at magsimula sa 'Subukan ito...' o 'Ipares ito sa...' (Be concise, excited, and focus on Philippine pairings).";
            const userQuery = `Magbigay ng pairing suggestion para sa: ${itemName}`;
            
            // 3. Construct Payload
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            // 4. Initial Modal State
            modalTitleElement.textContent = `Pairing para sa ${itemName}`;
            modalLoadingElement.classList.remove('hidden');
            modalSuggestionElement.classList.add('hidden');
            modalErrorElement.classList.add('hidden');

            try {
                // 5. Fetch call with simple retry logic (Exponential Backoff)
                let response;
                let attempts = 0;
                while (attempts < 3) {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (response.ok) break;

                    attempts++;
                    if (attempts < 3) {
                        const delay = Math.pow(2, attempts) * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                    } else {
                        throw new Error('API call failed after multiple retries.');
                    }
                }
                
                // 6. Process Response
                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (text) {
                    modalSuggestionElement.textContent = text;
                    modalSuggestionElement.classList.remove('hidden');
                } else {
                    modalErrorElement.textContent = "Walang nahanap na suhestiyon. Pakisubok ulit mamaya.";
                    modalErrorElement.classList.remove('hidden');
                }

            } catch (error) {
                console.error("Gemini API Error:", error);
                modalErrorElement.textContent = "Hindi ma-access ang Gemini AI. May problema sa koneksyon o sa API Key.";
                modalErrorElement.classList.remove('hidden');
            } finally {
                modalLoadingElement.classList.add('hidden');
            }
        }

        // --- MAIN APP INITIALIZATION ---
        window.onload = function() {
            // Assign global elements
            contactForm = document.getElementById('contact-form');
            formMessage = document.getElementById('form-message');
            submitButton = document.getElementById('submit-button');
            buttonText = document.getElementById('button-text');
            loadingSpinner = document.getElementById('loading-spinner');
            
            // Initial state: Disable button until form is interacted with
            submitButton.disabled = false;


            // 1. Mobile Menu Listeners
            document.getElementById('mobile-menu-button').addEventListener('click', () => toggleMobileMenu(true));
            document.getElementById('mobile-menu-close-button').addEventListener('click', () => toggleMobileMenu(false));
            document.getElementById('mobile-menu-overlay').addEventListener('click', () => toggleMobileMenu(false));

            // Close mobile menu when a link is clicked
            document.querySelectorAll('.mobile-nav-link').forEach(link => {
                link.addEventListener('click', () => toggleMobileMenu(false));
            });

            // 2. Contact Form Listener
            if (contactForm) {
                contactForm.addEventListener('submit', handleContactSubmit);
            }


            // 3. Gemini Modal Listeners
            const modal = document.getElementById('pairing-modal');
            const modalCloseButton = document.getElementById('modal-close-button');
            const modalOverlay = modal.querySelector('.modal-overlay');

            const modalTitle = document.getElementById('modal-title');
            const modalSuggestion = document.getElementById('modal-suggestion');
            const modalLoading = document.getElementById('modal-loading');
            const modalError = document.getElementById('modal-error');
            
            function showModal() {
                modal.classList.remove('hidden');
            }

            function hideModal() {
                modal.classList.add('hidden');
                // Reset content on close
                modalTitle.textContent = "Loading Suggestion...";
                modalSuggestion.textContent = "";
                modalError.classList.add('hidden');
            }

            modalCloseButton.addEventListener('click', hideModal);
            modalOverlay.addEventListener('click', hideModal);
            
            document.querySelectorAll('.pairing-suggestion-trigger').forEach(button => {
                button.addEventListener('click', function() {
                    const itemName = this.getAttribute('data-item');
                    showModal();
                    getPairingSuggestion(itemName, modalTitle, modalSuggestion, modalLoading, modalError);
                });
            });

            // 4. Smooth Scrolling for internal links (Optional, but improves UX)
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

        };

    </script>

</body>
</html>
